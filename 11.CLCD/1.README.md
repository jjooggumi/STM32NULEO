# 🖥️ I2C LCD 제어 (PCF8574 + 16x2 LCD)

STM32 + I2C 인터페이스를 이용해 **PCF8574 기반 16x2 LCD** 제어
I2C 스캔 기능으로 연결된 디바이스 주소를 확인하고, LCD를 초기화 후 문자열 출력

---

## 🔧 주요 기능

- **I2C 스캔**  
  연결된 I2C 디바이스의 주소를 검색하여 UART로 출력  
  (`HAL_I2C_IsDeviceReady` 이용)

- **LCD 제어 (PCF8574 4-bit 모드)**  
  - `LCD_INIT()` : LCD 초기화 (4-bit 모드 전환, 커서 설정, 화면 클리어)
  - `LCD_XY(x, y)` : 커서 위치 이동  
  - `LCD_CLEAR()` : 전체 화면 클리어  
  - `LCD_PUTS(str)` : 문자열 출력

- **UART 디버그 출력**  
  - `printf()` 리타겟팅으로 PC 모니터링 가능 (115200bps)

---

## 📜 코드 동작 개요

```c
int main(void)
{
    HAL_Init();
    SystemClock_Config();

    MX_GPIO_Init();
    MX_USART2_UART_Init();
    MX_I2C1_Init();

    I2C_ScanAddresses();              // 연결된 I2C 디바이스 주소 출력

    while (1)
    {
        LCD_INIT();                   // LCD 초기화
        LCD_XY(0, 0);
        LCD_PUTS("LCD Display test");

        LCD_XY(0, 1);
        LCD_PUTS("Hello World.....");
    }
}
```

## 🧩 주요 함수 설명
| 함수명                   | 설명                                            |
| --------------------- | --------------------------------------------- |
| `I2C_ScanAddresses()` | 0x01 \~ 0x7F 주소 범위를 스캔하고, 응답이 있는 주소를 UART로 출력 |
| `LCD_INIT()`          | 4-bit 모드 진입, 화면 클리어, 커서 방향/디스플레이 설정           |
| `LCD_XY(x, y)`        | 커서 위치를 x(열), y(행)로 이동                         |
| `LCD_CLEAR()`         | LCD 화면 전체 클리어                                 |
| `LCD_PUTS(str)`       | 문자열 출력                                        |
| `LCD_DATA(data)`      | 데이터(문자) 전송                                    |
| `LCD_CMD(cmd)`        | LCD 명령 전송 (4비트 분할 전송)                         |

---

## ⚙️ I2C 주소 설정
```c
//#define ADDRESS   0x3F << 1
#define ADDRESS   0x27 << 1
```
보드마다 PCF8574의 기본 주소가 다를 수 있으므로
I2C_ScanAddresses() 함수로 실제 연결 주소 확인 후,
맞는 주소로 수정해야 정상 동작함

---

## ▶️ 빌드 및 실행 방법
1. STM32CubeIDE에서 프로젝트 빌드
2. 보드에 펌웨어 업로드
3. 터미널(Tera Term) 연결 (115200bps)
4. 전원을 인가하면 UART에 I2C 스캔 결과가 표시되고, LCD에 메시지가 출력됨

## 🖼️ 출력결과
### UART 로그
<img width="415" height="340" alt="image" src="https://github.com/user-attachments/assets/e45db6a9-d3c0-4740-9df9-b8bb8208918c" />

### LCD 화면
<img width="667" height="502" alt="image" src="https://github.com/user-attachments/assets/5f75e5b6-f189-4258-8bf7-945f0209fa13" />
